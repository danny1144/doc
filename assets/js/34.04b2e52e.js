(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{389:function(t,e,_){"use strict";_.r(e);var n=_(1),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"content"},[t._m(0),t._v(" "),_("p",[_("a",{attrs:{href:"http://mirrors.gigenet.com/apache/directory/studio/2.0.0.v20180908-M14/ApacheDirectoryStudio-2.0.0.v20180908-M14-win32.win32.x86_64.exe",title:"ApacheDirectoryStudio",target:"_blank",rel:"noopener noreferrer"}},[t._v("ApacheDirectoryStudio"),_("OutboundLink")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),_("p",[t._v("slapd.conf修改配置文件")]),t._v(" "),t._m(5),t._m(6),_("p",[t._v('ldapadd -c -x -D "cn=manager,dc=siemens,dc=com" -w 123456 -f ldapUsers.ldif')]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._m(9),t._m(10),t._v(" "),_("p",[t._v("schema加入")]),t._v(" "),_("p",[t._v("include  ./schema/java.schema")]),t._v(" "),_("p",[t._v("异常信息")]),t._v(" "),t._m(11),t._m(12),t._v(" "),_("p",[t._v("LDAP_SUCCESS = 0 //成功")]),t._v(" "),_("p",[t._v("LDAP_OPERATIONS_ERROR = 1 //操作错误")]),t._v(" "),_("p",[t._v("LDAP_PROTOCOL_ERROR = 2 //协议错误")]),t._v(" "),_("p",[t._v("LDAP_TIME_LIMIT_EXCEEDED = 3 //超过最大时间限制")]),t._v(" "),_("p",[t._v("LDAP_SIZE_LIMIT_EXCEEDED = 4 //超过最大返回条目数")]),t._v(" "),_("p",[t._v("LDAP_COMPARE_FALSE = 5 //比较不匹配")]),t._v(" "),_("p",[t._v("LDAP_COMPARE_TRUE = 6 //比较匹配")]),t._v(" "),_("p",[t._v("LDAP_AUTH_METHOD_NOT_SUPPORTED = 7 //认证方法未被支持")]),t._v(" "),_("p",[t._v("LDAP_STRONG_AUTH_REQUIRED = 8 //需要强认证")]),t._v(" "),_("p",[t._v("LDAP_PARTIAL_RESULTS = 9 //null")]),t._v(" "),_("p",[t._v("LDAP_REFERRAL = 10 //Referral")]),t._v(" "),_("p",[t._v("LDAP_ADMIN_LIMIT_EXCEEDED = 11 //超出管理员权限")]),t._v(" "),_("p",[t._v("LDAP_UNAVAILABLE_CRITICAL_EXTENSION = 12 //Critical扩展无效")]),t._v(" "),_("p",[t._v("LDAP_CONFIDENTIALITY_REQUIRED = 13 //需要Confidentiality")]),t._v(" "),_("p",[t._v("LDAP_SASL_BIND_IN_PROGRESS = 14 //需要SASL绑定")]),t._v(" "),_("p",[t._v("LDAP_NO_SUCH_ATTRIBUTE = 16 //未找到该属性")]),t._v(" "),_("p",[t._v("LDAP_UNDEFINED_ATTRIBUTE_TYPE = 17 //未定义的属性类型")]),t._v(" "),_("p",[t._v("LDAP_INAPPROPRIATE_MATCHING = 18 //不适当的匹配")]),t._v(" "),_("p",[t._v("LDAP_CONSTRAINT_VIOLATION = 19 //约束冲突")]),t._v(" "),_("p",[t._v("LDAP_ATTRIBUTE_OR_value_EXISTS = 20 //属性或值已存在")]),t._v(" "),_("p",[t._v("LDAP_INVALID_ATTRIBUTE_SYNTAX = 21 //无效的属性语法")]),t._v(" "),_("p",[t._v("LDAP_NO_SUCH_OBJECT = 32 //未找到该对象")]),t._v(" "),_("p",[t._v("LDAP_ALIAS_PROBLEM = 33 //别名有问题")]),t._v(" "),_("p",[t._v("LDAP_INVALID_DN_SYNTAX = 34 //无效的DN语法")]),t._v(" "),_("p",[t._v("LDAP_IS_LEAF = 35 //null")]),t._v(" "),_("p",[t._v("LDAP_ALIAS_DEREFERENCING_PROBLEM = 36 //Dereference别名有问题")]),t._v(" "),_("p",[t._v("LDAP_INAPPROPRIATE_AUTHENTICATION = 48 //不适当的认证")]),t._v(" "),_("p",[t._v("LDAP_INVALID_CREDENTIALS = 49 //无效的Credential")]),t._v(" "),_("p",[t._v("LDAP_INSUFFICIENT_ACCESS_RIGHTS = 50 //访问权限不够")]),t._v(" "),_("p",[t._v("LDAP_BUSY = 51 //遇忙")]),t._v(" "),_("p",[t._v("LDAP_UNAVAILABLE = 52 //无效")]),t._v(" "),_("p",[t._v("LDAP_UNWILLING_TO_PERform = 53 //意外问题")]),t._v(" "),_("p",[t._v("LDAP_LOOP_DETECT = 54 //发现死循环")]),t._v(" "),_("p",[t._v("LDAP_NAMING_VIOLATION = 64 //命名冲突")]),t._v(" "),_("p",[t._v("LDAP_OBJECT_CLASS_VIOLATION = 65 //对象类冲突")]),t._v(" "),_("p",[t._v("LDAP_NOT_ALLOWED_ON_NON_LEAF = 66 //不允许在非叶结点执行此操作")]),t._v(" "),_("p",[t._v("LDAP_NOT_ALLOWED_ON_RDN = 67 //不允许对RDN执行此操作")]),t._v(" "),_("p",[t._v("LDAP_ENTRY_ALREADY_EXISTS = 68 //Entry已存在")]),t._v(" "),_("p",[t._v("LDAP_OBJECT_CLASS_MODS_PROHIBITED = 69 //禁止更改对象类")]),t._v(" "),_("p",[t._v("LDAP_AFFECTS_MULTIPLE_DSAS = 71 //null")]),t._v(" "),_("p",[t._v("LDAP_OTHER = 80 //其它")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._v(" "),_("p",[t._v("线上ACL控制配置解析\n为了用户能够自主修改密码，部署了lam给用户使用（见下文lam介绍）。希望能达到的效果是：\n管理员能够有全部权限，包含新建用户，修改用户属性，充值用户密码等\n普通用户只能修改自己的密码，别的权限都没有\n配置如下：")]),t._v(" "),t._m(17),_("p",[t._v('access to *\nby dn="cn=admin,dc=163,dc=com" write\nby dn.children="ou=Admin,dc=163,dc=com" write\nby * read')]),t._v(" "),t._m(18),t._v(" "),_("p",[_("a",{attrs:{href:"https://www.ibm.com/developerworks/cn/linux/l-openldap/#listing18",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 OpenLDAP 集中管理用户帐号"),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("Vssue title='测试' />")])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ldap操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ldap操作"}},[this._v("#")]),this._v(" ldap操作")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ldap常用属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ldap常用属性"}},[this._v("#")]),this._v(" LDAP常用属性")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("DN：Distinguished Name，可以叫做条目区分名。在一个目录中这个名称总是唯一的，也是用来标识一个节点的主要方式。它有若干属性：   \n1、CN=CommonName 为用户名或服务器名，最长可以到80个字符，可以为中文； \n2、OU=OrganizationUnit为组织单元，最多可以有四级，每级最长32个字符，可以为中文； \n3、DC= DomainComponent 为目录结构 \n4、O=Organization为组织名，可选，可以3—64个字符长 \n5、C=Country为国家名，可选，为2个字符长 \n")])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("table",[_("thead",[_("tr",[_("th",[t._v("对象类")]),t._v(" "),_("th",[t._v("必要属性(Required)")]),t._v(" "),_("th",[t._v("可选属性（Optional）")]),t._v(" "),_("th"),t._v(" "),_("th")])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("top")]),t._v(" "),_("td",[t._v("objectClass")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("person")]),t._v(" "),_("td",[t._v("cn")]),t._v(" "),_("td",[t._v("description")]),t._v(" "),_("td",[t._v("seeAlso")]),t._v(" "),_("td",[t._v("telephoneNumber")])]),t._v(" "),_("tr",[_("td",[t._v("sn")]),t._v(" "),_("td",[t._v("userPassword")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("organizationalPerson")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td",[t._v("destinationIndicator")]),t._v(" "),_("td",[t._v("facsimileTelephoneNumber")]),t._v(" "),_("td",[t._v("internationalISDNNumber")])]),t._v(" "),_("tr",[_("td",[t._v("1")]),t._v(" "),_("td",[t._v("ou")]),t._v(" "),_("td",[t._v("physicalDeliveryOfficeName")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("postalAddress")]),t._v(" "),_("td",[t._v("postalCode")]),t._v(" "),_("td",[t._v("postOfficeBox")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("preferredDeliveryMethod")]),t._v(" "),_("td",[t._v("registeredAddress")]),t._v(" "),_("td",[t._v("st")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("street")]),t._v(" "),_("td",[t._v("teletexTerminalIdentifier")]),t._v(" "),_("td",[t._v("telexNumber")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("title")]),t._v(" "),_("td",[t._v("x121Address")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td")])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("table",[_("thead",[_("tr",[_("th",[t._v("对象类")]),t._v(" "),_("th",[t._v("必要属性(Required)")]),t._v(" "),_("th",[t._v("可选属性（Optional）")]),t._v(" "),_("th"),t._v(" "),_("th")])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("inetOrgPerson")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("audio")]),t._v(" "),_("td",[t._v("businessCategory")]),t._v(" "),_("td",[t._v("carLicense")])]),t._v(" "),_("tr",[_("td",[t._v("departmentNumber")]),t._v(" "),_("td",[t._v("displayName")]),t._v(" "),_("td",[t._v("employNumber")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("employeeType")]),t._v(" "),_("td",[t._v("givenName")]),t._v(" "),_("td",[t._v("homePhone")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("homePostalAddress")]),t._v(" "),_("td",[t._v("initals")]),t._v(" "),_("td",[t._v("jpegPhoto")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("labeledURL")]),t._v(" "),_("td",[t._v("mail")]),t._v(" "),_("td",[t._v("manager")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("mobile")]),t._v(" "),_("td",[t._v("o")]),t._v(" "),_("td",[t._v("pager")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("photo")]),t._v(" "),_("td",[t._v("preferredLanguage")]),t._v(" "),_("td",[t._v("roomNumber")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("secretary")]),t._v(" "),_("td",[t._v("uid")]),t._v(" "),_("td",[t._v("userCertificate")]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("userOKCS12")]),t._v(" "),_("td",[t._v("userSMIMECertificate")]),t._v(" "),_("td",[t._v("x500UniqueIdentifier")]),t._v(" "),_("td"),t._v(" "),_("td")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('database\tmdb\nsuffix\t\t"dc=siemens,dc=com"\nrootdn\t\t"cn=Manager,dc=siemens,dc=com"\n\nslappasswd -h {MD5} -s 123456  ("mysecret"是自定义的密码，可以随便设置)算出加密的密码 {MD5}4QrcOUm6Wau+VuBX8g+IPg== 替换配置中的 secret\n\nrootpw    {MD5}4QrcOUm6Wau+VuBX8g+IPg==\n\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('ldapsearch -x -h localhost -p 389 -b "dc=siemens,dc=com" -D "uid=Miumiu,ou=Tester,dc=siemens,dc=com" -w 111111\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("如果没有”ldapadd“这个命令，还可以用它自带的命令“slapadd”代替导入数据文件。不过要注意的是：和ldapadd命令不同的是：执行slapadd命令前需要先停止之前启动的 slapd 服务（打开服务确定停止了该服务），然后在控制台中切换到openLDAP安装目录下执行命令：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('slapadd   -v -l  ./mydata/ldapuser.ldif\n5d887cc2 mdb_monitor_db_open: monitoring disabled; configure monitor database to enable\nadded: "dc=siemens,dc=com" (00000003)\nadded: "ou=users,dc=siemens,dc=com" (00000004)\nadded: "uid=admin123456,ou=users,dc=siemens,dc=com" (00000005)\n_#################### 100.00% eta   none elapsed            none fast!\nClosing DB...\n\n \n\nldapsearch -x -h 10.192.30.193  -b "dc=siemens,dc=com" "(objectclass=*)"\n\nldapdelete -x -D "uid=Miumiu,ou=Tester,dc=siemens,dc=com" -w 111111 \n\n\nldapdelete -x -h localhost  -D "cn=Manager,dc=example,dc=org" -w admin  "uid=bjensenuid,ou=People,dc=example,dc=org"\n \n\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-pr extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("配置文件导入\n\ndn: dc=siemens,dc=com\nobjectClass: top\nobjectClass: domain\ndc: siemens\n\ndn: ou=users,dc=siemens,dc=com\nobjectclass: top\nobjectclass: organizationalUnit\nou: users\n\ndn: uid=admin123456,ou=users,dc=siemens,dc=com\nobjectclass: top\nobjectclass: person\nobjectclass: organizationalPerson\nobjectclass: inetOrgPerson\ncn: superAdmin\nsn: admin\nuid: admin123456\nuserPassword: admin123456\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"java联调"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#java联调"}},[this._v("#")]),this._v(" java联调")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("javax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]  --用户名或者密码错误\n\njavax.naming.NoPermissionException: [LDAP: error code 50 - no write access to parent]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("LDAP常见错误码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("3.访问控制")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('# Sample Access Control\n#       Allow read access of root DSE\n# Allow self write access\n#       Allow authenticated users read access\n#       Allow anonymous users to authenticate\n# access to dn="" by * read\n  access to * by self write\n              by users read\n              by anonymous auth\n#\n# if no access controls are present, the default is:\n#       Allow read by all\n#\n# rootdn can always write!\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("此选项涉及如何管理服务器上的 LDAP 目录的访问权限。只要在数据库特定部分没有声明任何自定义访问规则，"),e("code",[this._v("slapd.conf")]),this._v(" 的全局部分中的设置将始终有效。这些自定义声明会重写全局声明。如本例所示，所有用户都可以读取目录，但只有管理员 ("),e("code",[this._v("rootdn")]),this._v(") 才能写入此目录。LDAP 中的访问控制管理是一个非常复杂的过程。以下提示会有所帮助：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("每条访问规则都具有如下结构：")]),this._v(" "),e("div",{staticClass:"language-ldif extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("access to <what> by <who> <access>\n")])])]),e("h2",{attrs:{id:"目录授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录授权"}},[this._v("#")]),this._v(" 目录授权")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('# access to attrs=userPassword通过属性找到访问范围密码,\n# 超级管理员也就是我们ldap配置文件里写的rootdn："cn=admin,dc=163,dc=com"有写(write)权限；\n# 由于管理员可能不止一个，我创建了个管理员组"ou=Admin,dc=163,dc=com"把管理员统一都放到这个组下，管理员组下的所有用户（dn.children）有写权限；\n# 匿名用户(anonymous)要通过验证(auth);\n# 自己(self)有对自己密码的写（write）权限，其他人(*)都没有权限(none).```\naccess to attrs=userPassword,shadowLastChange\n        by dn="cn=admin,dc=163,dc=com" write\n        by dn.children="ou=Admin,dc=163,dc=com" write\n        by anonymous auth\n        by self write\n        by * none\n\n``` # access to * 所有其他属性，\n# 超级管理员rootdn："cn=admin,dc=163,dc=com"有写(write)权限；\n# 管理员"ou=Admin,dc=163,dc=com"成员有写(write)权限；\n# 其他人(*)只有读(read)权限 \n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[this._v("#")]),this._v(" 参考文章")])}],!1,null,null,null);e.default=s.exports}}]);